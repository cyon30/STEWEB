<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sky Tech Enterprise ⚡</title>
    %(heads)s
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Share+Tech+Mono&display=swap"
        rel="stylesheet">
    <style>
        /* ── Loading overlay ── */
        #ste-loader {
            position: fixed;
            inset: 0;
            background: #020712;
            z-index: 999999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 24px;
            transition: opacity 0.6s ease;
        }

        #ste-loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Scanlines */
        #ste-loader::after {
            content: '';
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(0deg,
                    transparent, transparent 2px,
                    rgba(0, 191, 255, 0.015) 2px, rgba(0, 191, 255, 0.015) 4px);
            pointer-events: none;
        }

        /* Glow burst */
        .loader-glow {
            position: fixed;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(0, 191, 255, 0.16) 0%, rgba(120, 0, 255, 0.07) 40%, transparent 70%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            filter: blur(80px);
            animation: glowPulse 3s ease-in-out infinite;
        }

        @keyframes glowPulse {

            0%,
            100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        /* Spinner */
        .loader-ring {
            position: relative;
            width: 90px;
            height: 90px;
            z-index: 2;
        }

        .loader-ring::before,
        .loader-ring::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 50%;
        }

        .loader-ring::before {
            border: 2px solid rgba(0, 191, 255, 0.12);
        }

        .loader-ring::after {
            border: 2px solid transparent;
            border-top-color: #00BFFF;
            border-right-color: rgba(0, 191, 255, 0.35);
            animation: spin 0.85s linear infinite;
        }

        .loader-inner {
            position: absolute;
            inset: 14px;
            border-radius: 50%;
            border: 2px solid transparent;
            border-bottom-color: rgba(0, 191, 255, 0.5);
            animation: spin 1.3s linear infinite reverse;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Brand */
        .loader-brand {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1rem, 5vw, 1.6rem);
            font-weight: 900;
            letter-spacing: 4px;
            color: #fff;
            text-shadow: 0 0 20px rgba(0, 191, 255, 0.8);
            z-index: 2;
        }

        .loader-brand em {
            color: #00BFFF;
            font-style: normal;
        }

        /* Progress sweep */
        .loader-bar-wrap {
            width: 180px;
            height: 2px;
            background: rgba(0, 191, 255, 0.08);
            border-radius: 2px;
            overflow: hidden;
            z-index: 2;
        }

        .loader-bar {
            height: 100%;
            background: linear-gradient(90deg, transparent, #00BFFF, transparent);
            animation: sweep 1.4s ease-in-out infinite;
        }

        @keyframes sweep {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(220%);
            }
        }

        /* Status */
        .loader-status {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.68rem;
            color: #00BFFF;
            letter-spacing: 3px;
            text-transform: uppercase;
            z-index: 2;
            animation: blink 1.2s step-end infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: .7
            }

            50% {
                opacity: .2
            }
        }
    </style>
</head>

<body>

    <!-- ── Custom loading overlay ── -->
    <div id="ste-loader">
        <div class="loader-glow"></div>
        <div class="loader-ring">
            <div class="loader-inner"></div>
        </div>
        <div class="loader-brand">Sky <em>Tech</em> Enterprise</div>
        <div class="loader-bar-wrap">
            <div class="loader-bar"></div>
        </div>
        <div class="loader-status">Systems Initializing...</div>
    </div>

    <!-- ── Streamlit mounts here ── -->
    <div id="root"></div>

    <script>
        // Hide loader once Streamlit's app content appears
        const loader = document.getElementById('ste-loader');
        const observer = new MutationObserver(() => {
            const app = document.querySelector('[data-testid="stApp"]');
            if (app && app.children.length > 0) {
                loader.classList.add('hidden');
                setTimeout(() => { loader.style.display = 'none'; }, 700);
                observer.disconnect();
            }
        });
        observer.observe(document.getElementById('root'), { childList: true, subtree: true });

        // Safety fallback — hide after 10s regardless
        setTimeout(() => {
            loader.classList.add('hidden');
            setTimeout(() => { loader.style.display = 'none'; }, 700);
        }, 10000);
    </script>

</body>

</html>
